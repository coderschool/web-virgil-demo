#!/usr/bin/env node
"use strict";

const Logger = require("./logger");
const { runner } = require("./index");
const execSync = require("child_process").execSync;

runner(process.argv.slice(2), {
  cwd: process.cwd(),
  logger: new Logger(console.log.bind(console)),
  debug: process.env.DEBUG || true,
  exec: (action, body) => {
    // To use execa we need to config the project to ES6 with babel
    // const opts = body && body.length > 0 ? { input: body } : {};
    // return require("execa").command(action, { ...opts, shell: true });
    return execSync(action);
  },
}).then(({ success }) => process.exit(success ? 0 : 1));
