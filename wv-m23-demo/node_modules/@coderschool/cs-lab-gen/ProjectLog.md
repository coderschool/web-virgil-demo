# Project Log

Step by step setting up the project

## Initial project

Docs: https://docs.github.com/en/packages/quickstart

1. Create new Github repo: https://github.com/dhminh1024/cs-lab-gen

2. Create folder

```cli
$ mkdir cs-lab-gen
$ cd cs-lab-gen
$ git init
$ git remote add origin git@github.com:dhminh1024/cs-lab-gen.git
```

3. Add `.gitignore`

```
node_modules
coverage
dist
.DS_Store

# these cause more harm than good
# when working with contributors
package-lock.json
yarn.lock
```

4. Initialize an npm package with `npm init`

```
$ npm init
  ...
  package name: @dhminh1024/cs-lab-gen
  version: (1.0.0)
  description: A tool to generate step-by-step instructions for CS Lab Assignments
  entry point: src/index.js
  test command: exit 0
  git repository: (https://github.com/dhminh1024/cs-lab-gen.git)
  keywords:
  author: dhminh1024
  license: (ISC)
```

5. Create a `.github/workflows` directory. In that directory, create a file named `release-package.yml`. Copy the following YAML content into the `release-package.yml` file.

```
name: Node.js Package

on:
  release:
    types: [created]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: 12
      - run: npm ci
      - run: npm test

  publish-gpr:
    needs: build
    runs-on: ubuntu-latest
    permissions:
      packages: write
      contents: read
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: 12
          registry-url: https://npm.pkg.github.com/
      - run: npm ci
      - run: npm publish
        env:
          NODE_AUTH_TOKEN: ${{secrets.GITHUB_TOKEN}}
```

6. Commit and push your changes to GitHub.

7. The workflow that you created will run whenever a new release is created in your repository. If the tests pass, then the package will be published to GitHub Packages.

To test this out, navigate to the Code tab in your repository and create a new release. For more information, see

- "[Managing releases in a repository](https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository#creating-a-release)."
- "[Creating a personal access token](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token)"

8. To install the package

Create a file `.npmrc`:

```
@coderschool:registry=https://npm.pkg.github.com
```

Then on the CLI

```
$ npm install @coderschool/cs-lab-gen
$ labgen
```

An error message should be shown:

```
Error: Please specify path to the docs.
```
